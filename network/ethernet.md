# 以太网 Ethernet

一种计算机局域网技术。IEEE组织的IEEE 802.3标准制定了以太网的技术标准，它规定了包括物理层的连线、电子信号和介质访问层协议的内容。以太网是目前应用最普遍的局域网技术，取代了其他局域网标准如令牌环、FDDI和ARCNET。

以太网的标准拓扑结构为总线型拓扑，但目前的快速以太网（100BASE-T、1000BASE-T标准）为了减少冲突，将能提高的网络速度和使用效率最大化，使用交换机（Switch hub）来进行网络连接和组织。如此一来，以太网的拓扑结构就成了星型；但在逻辑上，以太网仍然使用总线型拓扑和CSMA/CD（Carrier Sense Multiple Access/Collision Detection，即载波多重访问/碰撞侦测）的总线技术。

概述

以太网实现了网络上无线电系统多个节点发送信息的想法，每个节点必须获取电缆或者信道的才能传送信息，有时也叫作以太（Ether）
每一个节点	也就是制造商分配给网卡的MAC地址，以保证以太网上所有节点能互相鉴别。由于以太网十分普遍，许多制造商把以太网卡直接集成进计算机主板。

以太网通讯具有自相关性的特点，这对于电信通讯工程十分重要。

CSMA/CD共享介质以太网
带冲突检测的载波侦听多路访问（CSMA/CD）技术规定了多台计算机共享一个通道的方法。这项技术最早出现在1960年代由夏威夷大学开发的ALOHAnet，它使用无线电波为载体。这个方法要比令牌环网或者主控制网简单。当某台计算机要发送信息时，在以下行动与状态之间进行转换：

开始 - 如果线路空闲，则启动传输，否则跳转到第4步。
发送 - 如果检测到冲突，继续发送数据直到达到最小回报时间（min echo receive interval）以确保所有其他转发器和终端检测到冲突，而后跳转到第4步。
成功传输 - 向更高层的网络协议报告发送成功，退出传输模式。
线路繁忙 - 持续等待直到线路空闲。
线路空闲 - 在尚未达到最大尝试次数之前，每隔一段随机时间转到第1步重新尝试。
超过最大尝试传输次数 - 向更高层的网络协议报告发送失败，退出传输模式。
就像在没有主持人的座谈会中，所有的参加者都透过一个共同的介质（空气）来相互交谈。每个参加者在讲话前，都礼貌地等待别人把话讲完。如果两个客人同时开始讲话，那么他们都停下来，分别随机等待一段时间再开始讲话。这时，如果两个参加者等待的时间不同，冲突就不会出现。如果传输失败超过一次，将延迟指数增长时间后再次尝试。延迟的时间透过 截断二进制指数后移（truncated binary exponential backoff）算法来实现。

最初的以太网是采用同轴电缆来连接各个设备的。计算机透过一个叫做附加单元接口（Attachment Unit Interface，AUI）的收发器连接到电缆上。一条简单网路线对于一个小型网络来说很可靠，而对于大型网络来说，某处线路的故障或某个连接器的故障，都会造成以太网某个或多个网段的不稳定。

因为所有的通信信号都在共用线路上传输，即使信息只是想发给其中的一个终端（destination），却会使用广播的形式，发送给线路上的所有计算机。在正常情况下，网络接口卡会滤掉不是发送给自己的信息，接收到目标地址是自己的信息时才会向CPU发出中断请求，除非网卡处于混杂模式（Promiscuous mode）。这种“一个说，大家听”的特质是共享介质以太网在安全上的弱点，因为以太网上的一个节点可以选择是否监听线路上传输的所有信息。共享电缆也意味着共享带宽，所以在某些情况下以太网的速度可能会非常慢，比如电源故障之后，当所有的网络终端都重新启动时。

以太网中继器和集线器
在以太网技术的发展中，以太网集线器（Ethernet Hub）的出现使得网络更加可靠，接线更加方便。

因为信号的衰减和延时，根据不同的介质以太网段有距离限制。例如，10BASE5同轴电缆最长距离500米 （1,640英尺）。最大距离可以透过以太网中继器实现，中继器可以把电缆中的信号放大再传送到下一段。中继器最多连接5个网段，但是只能有4个设备（即一个网段最多可以接4个中继器）。这可以减轻因为电缆断裂造成的问题：当一段同轴电缆断开，所有这个段上的设备就无法通讯，中继器可以保证其他网段正常工作。

类似于其他的高速总线，以太网网段必须在两头以电阻器作为终端。对于同轴电缆，电缆两头的终端必须接上被称作“终端器”的50欧姆的电阻和散热器，如果不这么做，就会发生类似电缆断掉的情况：总线上的AC信号当到达终端时将被反射，而不能消散。被反射的信号将被认为是冲突，从而使通信无法继续。中继器可以将连在其上的两个网段进行电气隔离，增强和同步信号。大多数中继器都有被称作“自动隔离”的功能，可以把有太多冲突或是冲突持续时间太长的网段隔离开来，这样其他的网段不会受到损坏部分的影响。中继器在检测到冲突消失后可以恢复网段的连接。

随着应用的拓展，人们逐渐发现星型的网络拓扑结构最为有效，于是设备厂商们开始研制有多个端口的中继器。多端口中继器就是众所周知的集线器（Hub）。集线器可以连接到其他的集线器或者同轴网络。

第一个集线器被认为是“多端口收发器”或者叫做“fanouts”。最著名的例子是DEC的DELNI，它可以使许多台具有AUI连接器的主机共用一个收发器。集线器也导致了不使用同轴电缆的小型独立以太网网段的出现。

像DEC和SynOptics这样的网络设备制造商曾经出售过用于连接许多10BASE-2细同轴线网段的集线器。

非屏蔽双绞线（unshielded twisted-pair cables , UTP）最先应用在星型局域网中，之后也在10BASE-T中应用，最后取代了同轴电缆成为以太网的标准。这项改进之后，RJ45电话接口代替了AUI成为计算机和集线器的标准线路，非屏蔽3类双绞线/5类双绞线成为标准载体。集线器的应用使某条电缆或某个设备的故障不会影响到整个网络，提高了以太网的可靠性。双绞线以太网把每一个网段点对点地连起来，这样终端就可以做成一个标准的硬件，解决了以太网的终端问题。

采用集线器组网的以太网尽管在物理上是星型结构，但在逻辑上仍然是总线型的，半双工的通信方式采用CSMA/CD的冲突检测方法，集线器对于减少数据包冲突的作用很小。每一个数据包都被发送到集线器的每一个端口，所以带宽和安全问题仍没有解决。集线器的总传输量受到单个连接速度的限制（10或100 Mbit/s），这还是考虑在前同步码、传输间隔、标头、档尾和封装上都是最小花费的情况。当网络负载过重时，冲突也常常会降低传输量。最坏的情况是，当许多用长电缆组成的主机传送很多非常短的帧(frame)时，可能因冲突过多导致网络的负载在仅50%左右程度就满载。为了在冲突严重降低传输量之前尽量提高网络的负载，通常会先做一些设定以避免类似情况发生。

桥接和交换
尽管中继器在某些方面分隔了以太网网段，使得电缆断线的故障不会影响到整个网络，但它向所有的以太网设备转发所有的数据。这严重限制了同一个以太网网络上可以相互通信的机器数量。为了减轻这个问题，桥接方法被采用，在工作在物理层的中继器之基础上，桥接工作在数据链路层。透过网桥时，只有格式完整的数据包才能从一个网段进入另一个网段；冲突和数据包错误则都被隔离。透过记录分析网络上设备的MAC地址，网桥可以判断它们都在什么位置，这样它就不会向非目标设备所在的网段传递数据包。像生成树协议这样的控制机制可以协调多个交换机共同工作。

早期的网桥要检测每一个数据包，因此当同时处理多个端口的时候，数据转发比Hub（中继器）来得慢。1989年网络公司Kalpana发明了EtherSwitch，第一台以太网交换机。以太网交换机把桥接功能用硬件实现，这样就能保证转发数据速率达到线速。

大多数现代以太网用以太网交换机代替Hub。尽管布线方式和Hub以太网相同，但交换式以太网比共享介质以太网有很多明显的优势，例如更大的带宽和更好的异常结果隔离设备。交换网络典型的使用星型拓扑，虽然设备在半双工模式下运作时仍是共享介质的多节点网，但10BASE-T和以后的标准皆为全双工以太网，不再是共享介质系统。

交换机启动后，一开始也和Hub一样，转发所有数据到所有端口。接下来，当它记录了每个端口的地址以后，他就只把非广播数据发送给特定的目的端口。因此线速以太网交换可以在任何端口对之间实现，所有端口对之间的通讯互不干扰。

因为数据包一般只是发送到他的目的端口，所以交换式以太网上的流量要略微小于共享介质式以太网。然而，交换式以太网仍然是不安全的网络技术，因为它很容易因为ARP欺骗或者MAC满溢而瘫痪，同时网络管理员也可以利用监控功能抓取网络数据包。

当只有简单设备（除Hub之外的设备）连接交换机端口时，整个网络可能处于全双工模式。如果一个网段只有2个设备，那么冲突探测也不需要了，两个设备可以随时收发数据。这时总带宽是链路的2倍，虽然双方的带宽相同，但没有发生冲突就意味着几乎能利用到100%的带宽。

交换机端口和所连接的设备必须使用相同的双工设置。多数100BASE-TX和1000BASE-T设备支持自动协商特性，即这些设备透过信号来协调要使用的速率和双工设置。然而，如果自动协商功能被关闭或者设备不支持，则双工设置必须透过自动检测进行设置或在交换机端口和设备上都进行手工设置以避免双工错配——这是以太网问题的一种常见原因（设备被设置为半双工会报告迟发冲突，而设备被设为全双工则会报告runt）。许多较低层级的交换机没有手工进行速率和双工设置的能力，因此端口总是会尝试进行自动协商。当启用了自动协商但不成功时（例如其他设备不支持），自动协商会将端口设置为半双工。速率是可以自动感测的，因此将一个10BASE-T设备连接到一个启用了自动协商的10/100交换端口上时将可以成功地创建一个半双工的10BASE-T连接。但是将一个配置为全双工100Mb工作的设备连接到一个配置为自动协商的交换端口时（反之亦然）则会导致双工错配。

即使电缆两端都设置成自动速率和双工模式协商，错误猜测还是经常发生而退到10Mbps模式。因此，如果性能差于预期，应该查看一下是否有计算机设置成10Mbps模式了，如果已知另一端配置为100Mbit，则可以手动强制设置成正确模式。.

当两个节点试图用超过电缆最高支持数据速率（例如在3类线上使用100Mbps或者3类/5类线使用1000Mbps）通信时就会发生问题。不像ADSL或者传统的拨号Modem透过详细的方法检测链路的最高支持数据速率，以太网节点只是简单的选择两端支持的最高速率而不管中间线路，因此如果速率过高就会导致链路失效。解决方案为强制通讯端降低到电缆支持的速率。

以太网类型
除了以上提到的不同帧类型以外，各类以太网的差别仅在速率和配线。因此，同样的网络协议栈软件可以在大多数以太网上运行。

以下的章节简要综述了不同的正式以太网类型。除了这些正式的标准以外，许多厂商因为一些特殊的原因，例如为了支持更长距离的光纤传输，而制定了一些专用的标准。

很多以太网卡和交换设备都支持多速率，设备之间透过自动协商设置最佳的连接速度和双工方式。如果协商失败，多速率设备就会探测另一方使用的速率但是默认为半双工方式。10/100以太网端口支持10BASE-T和100BASE-TX。10/100/1000支持10BASE-T、100BASE-TX和1000BASE-T。

早期的以太网
参见：兆比特以太网
施乐以太网（Xerox Ethernet，又称“施乐以太网”）──是以太网的雏型。最初的2.94Mbit/s以太网仅在施乐公司里内部使用。而在1982年，Xerox与DEC及Intel组成DIX联盟，并共同发表了Ethernet Version 2（EV2）的规格，并将它投入商场市场，且被普遍使用。而EV2的网络就是目前受IEEE承认的10BASE5。[1]
10BROAD36 ──已经过时。一个早期的支持长距离以太网的标准。它在同轴电缆上使用，以一种类似线缆调制解调器系统的宽带调制技术。
1BASE5 ──也称为星型局域网，速率是1Mbit/s。在商业上很失败，但同时也是双绞线的第一次使用。
10Mbps以太网

10BASE-T电缆
参见：十兆以太网
10BASE5（又称粗缆（Thick Ethernet）或黄色电缆）──最早实现10 Mbit/s以太网。早期IEEE标准，使用单根RG-11同轴电缆，最大距离为500米，并最多可以连接100台计算机的收发器，而缆线两端必须接上50欧姆的终端电阻。接收端透过所谓的“插入式分接头”插入电缆的内芯和屏蔽层。在电缆终结处使用N型连接器。尽管由于早期的大量布设，到现在还有一些系统在使用，这一标准实际上被10BASE2取代。
10BASE2（又称细缆（Thin Ethernet）或模拟网络）── 10BASE5后的产品，使用RG-58同轴电缆，最长转输距离约200米（实际为185米），仅能连接30台计算机，计算机使用T型适配器连接到带有BNC连接器的网卡，而线路两头需要50欧姆的终结器。虽然在能力、规格上不及10BASE5，但是因为其线材较细、布线方便、成本也便宜，所以得到更广泛的使用，淘汰了10BASE5。由于双绞线的普及，它也被各式的双绞线网络取代。
StarLAN ──第一个双绞线上实现的以太网络标准10 Mbit/s。后发展成10BASE-T。
10BASE-T ──使用3类双绞线、4类双绞线、5类双绞线的4根线（两对双绞线）100米。以太网集线器或以太网交换机位于中间连接所有节点。
FOIRL ──光纤中继器链路。光纤以太网络原始版本。
10BASE-F ── 10Mbps以太网光纤标准通称，2公里。只有10BASE-FL应用比较广泛。
10BASE-FL ── FOIRL标准一种升级。
10BASE-FB ──用于连接多个Hub或者交换机的骨干网技术，已废弃。
10BASE-FP ──无中继被动星型网，没有实际应用的案例。
100Mbps以太网（快速以太网）
参见：百兆以太网
快速以太网（Fast Ethernet）为IEEE在1995年发表的网络标准，能提供达100Mbps的传输速度。[2]

100BASE-T -- 下面三个100 Mbit/s双绞线标准通称，最远100米。
100BASE-TX -- 类似于星型结构的10BASE-T。使用2对电缆，但是需要5类电缆以达到100Mbit/s。
100BASE-T4 -- 使用3类电缆，使用所有4对线，半双工。由于5类线普及，已废弃。
100BASE-T2 -- 无产品。使用3类电缆。支持全双工使用2对线，功能等效100BASE-TX，但支持旧电缆。
100BASE-FX -- 使用多模光纤，最远支持400米，半双工连接 （保证冲突检测），2km全双工。
100VG AnyLAN -- 只有惠普支持，VG最早出现在市场上。需要4对三类电缆。也有人怀疑VG不是以太网。

苹果的千兆以太网络接口
1Gbps以太网
参见：吉比特以太网

1000BASE-SX的光信号与电气信号转换器
1000BASE-T -- 1 Gbit/s介质超五类双绞线或6类双绞线。
1000BASE-SX -- 1 Gbit/s多模光纤（取决于频率以及光纤半径，使用多模光纤时最长距离在220M至550M之间）。[3]
1000BASE-LX -- 1 Gbit/s多模光纤（小于550M）、单模光纤（小于5000M）。[4]
1000BASE-LX10 -- 1 Gbit/s单模光纤（小于10KM）。长距离方案
1000BASE-LHX --1 Gbit/s单模光纤（10KM至40KM）。长距离方案
1000BASE-ZX --1 Gbit/s单模光纤（40KM至70KM）。长距离方案
1000BASE-CX -- 铜缆上达到1Gbps的短距离（小于25 m）方案。早于1000BASE-T，已废弃。
10Gbps以太网
参见：10吉比特以太网
新的万兆以太网标准包含7种不同类型，分别适用于局域网、城域网和广域网。目前使用附加标准IEEE 802.3ae，将来会合并进IEEE 802.3标准。

10GBASE-CX4 -- 短距离铜缆方案用于InfiniBand 4x连接器和CX4电缆，最大长度15米。
10GBASE-SR -- 用于短距离多模光纤，根据电缆类型能达到26-82米，使用新型2GHz多模光纤可以达到300米。
10GBASE-LX4 -- 使用波分复用支持多模光纤240－300米，单模光纤超过10公里。
10GBASE-LR和10GBASE-ER -- 透过单模光纤分别支持10公里和40公里
10GBASE-SW、10GBASE-LW、10GBASE-EW。用于广域网PHY、OC-192 / STM-64 同步光纤网/SDH设备。物理层分别对应10GBASE-SR、10GBASE-LR和10GBASE-ER，因此使用相同光纤支持距离也一致。（无广域网PHY标准）
10GBASE-T -- 使用屏蔽或非屏蔽双绞线，使用CAT-6A类线至少支持100米传输。CAT-6类线也在较短的距离上支持10GBASE-T。
100Gbps以太网
参见：100G以太网
新的40G/100G以太网标准在2010年中制定完成，包含若干种不同的节制类型。目前使用附加标准IEEE 802.3ba。

40GBASE-KR4 -- 背板方案，最少距离1米。
40GBASE-CR4 / 100GBASE-CR10 -- 短距离铜缆方案，最大长度大约7米。
40GBASE-SR4 / 100GBASE-SR10 -- 用于短距离多模光纤，长度至少在100米以上。
40GBASE-LR4 / 100GBASE-LR10 -- 使用单模光纤，距离超过10公里。
100GBASE-ER4 -- 使用单模光纤，距离超过40公里。
参考文献
 Internet协议观念与实现ISBN 9577177069
 Internet协议观念与实现ISBN 9577177069
 IEEE 802.3-2008 Section 3 Table 38-2 p.109
 IEEE 802.3-2008 Section 3 Table 38-6 p.111
参看
